---

- name: Automate Cisco ACI
  hosts: aci
  gather_facts: false
  pre_tasks:
    - name: Ensure ACI login data is provided via environment variables
      ansible.builtin.assert:
        that:
          - lookup('ansible.builtin.env', 'ACI_HOST')is community.general.ansible_type('str')
          - lookup('ansible.builtin.env', 'ACI_USERNAME')is community.general.ansible_type('str')
          - lookup('ansible.builtin.env', 'ACI_PASSWORD')is community.general.ansible_type('str')
          - lookup('ansible.builtin.env', 'ACI_VALIDATE_CERTS')is community.general.ansible_type('str')
        quiet: true
        fail_msg: "Provide login credentials, for example: 'export ACI_HOST=aci-api-endpoint'"
  roles:
    - aci-automation
